# モルック審判練習アプリ

モルックゲームの審判練習のためのウェブアプリケーションです。二人のプレイヤーが対戦する様子をグラフィカルに表示し、審判として点数管理や勝敗判定をリアルタイムで行うことができます。

## 🎯 主な機能

### グラフィカルなゲーム体験
- **リアルなV字型ピン配置**: 公式ルールに沿った正しい配置
- **物理アニメーション**: ピンが倒れる・はじける・連鎖するリアルな物理演算
- **モルック投球アニメーション**: 放物線軌跡と回転を再現
- **美しいグラフィック**: Canvasを使用した高品質な描画

### 双方向インターフェース
- **手動モード**: ピンボタンで倒れたピンを選択（従来方式）
- **投球モード**: ピンめがけてクリックすると、その位置にモルックが直進して物理的にピンを倒す
- **リアルタイム反応**: 即座の物理演算と視覚的フィードバック

### 完全なゲームシステム
- **公式ルール実装**: 正しいモルックルール（1ターン1投球、ピン再設定）
- **自動スコア計算**: 1本倒し（番号得点）、複数倒し（本数得点）、ミス（0点）
- **リアルタイム判定**: 50点到達、50点超過（25点リセット）、3連続ミス（失格）
- **プレイヤー交代**: 自動的な交代とピンリセット
- **スコア履歴**: 詳細な投球記録と結果表示

### ユーザー体験
- **レスポンシブデザイン**: モバイル端末を含む全デバイス対応
- **直感的UI**: クリック操作で簡単にプレイ可能
- **視覚的フィードバック**: アニメーションとエフェクトで状況を明確に表示

## 📋 モルック公式ルール

### 基本ルール
1. **スコア計算**:
   - 1本だけ倒した場合: 倒したピンの番号が点数
   - 2本以上倒した場合: 倒した本数が点数
   - 1本も倒せなかった場合: 0点（ミス）

2. **勝利条件**:
   - ちょうど50点に到達したプレイヤーが勝利
   - 50点を超えた場合: 25点に戻る
   - 3回連続でミス: 失格（スコアが0点に戻る）

3. **ゲーム進行**:
   - 各プレイヤーは1ターンに1回投球（公式ルール）
   - 投球後、即交代
   - 倒れたピンは倒れた場所で立て直され、次のプレイヤーも使用可能

4. **正しいピン配置**:
   - 一番遠い列（奥）: 7・9・8
   - 二列目: 5・11・12・6
   - 三列目: 3・10・4
   - 四列目（手前）: 1・2

## 🎮 使い方

### 基本的な遊び方
1. `index.html` をブラウザで開く
2. モードを選択：
   - **手動モード**: 倒れたピンを右側のピンボタンでクリック選択
   - **投球モード**: ピンめがけてクリックすると、その位置にモルックが直進して物理的にピンを倒す
3. 「投球結果を確定」でスコアを記録
4. 自動的に次のプレイヤーに交代
5. 50点到達でゲーム終了

### 戦略のヒント
- **確実性重視**: 2本以上倒すことを狙い、安定した得点を重視
- **高得点狙い**: 高い番号のピン（12, 11, 10など）を単独で的確に狙う
- **配置理解**: 正しいピン配置を理解し、狙いやすいピンを見極める
- **リスク管理**: 50点に近づいたら慎重な投球を心がける

## 📁 ファイル構成

```
molkky/
├── index.html          # メインHTMLファイル
├── styles.css          # スタイルシート
├── script.js           # ゲームロジックと物理演算
├── README.md           # 説明書（このファイル）
└── .gitignore          # Git除外ファイル
```

## ⚙️ 技術仕様

- **HTML5 Canvas**: ゲームフィールドのリアルタイムグラフィック
- **CSS3**: モダンなUIデザインとアニメーション
- **Vanilla JavaScript**: 物理演算エンジンとゲームロジック
- **レスポンシブデザイン**: デスクトップ、タブレット、スマートフォン対応
- **アニメーションフレームワーク**: requestAnimationFrameによる60fps描画

## 🎨 物理演算機能

- **衝突判定**: モルックとピンの正確な衝突検出
- **ピン挙動**: 倒れる、回転、はじける、連鎖反応
- **倒れた位置で立つ**: 倒れたピンは倒れた場所から立て直される
- **境界処理**: エリア内にピンを留める制限
- **摩擦減衰**: リアルな停止挙動
- **平面図投球**: クリックした位置にモルックが直進する直感的な操作

## 🔧 カスタマイズ

### ピン配置の変更
```javascript
// script.js の initializePins() メソッドで位置を調整
// 公式配置：奥から 7-9-8 → 5-11-12-6 → 3-10-4 → 1-2
const positions = [
    { x: 365, y: 150, number: 7 },   // 一番遠い列
    { x: 400, y: 150, number: 9 },
    { x: 435, y: 150, number: 8 },
    { x: 347, y: 190, number: 5 },   // 二列目
    { x: 382, y: 190, number: 11 },
    { x: 418, y: 190, number: 12 },
    { x: 453, y: 190, number: 6 },
    // ... その他のピン配置
];
```

### UIデザインの調整
- `styles.css` で配色、フォント、レイアウトを変更
- CSS変数でテーマカラーを統一管理

### ゲームルールの変更
- `script.js` のスコア計算ロジックでルールをカスタマイズ
- 勝利条件や特殊ルールを追加可能

## 🚀 セットアップ

### ローカルでの実行
1. このリポジトリをクローン
```bash
git clone https://github.com/iceplantengineering/molkky.git
cd molkky
```

2. ローカルサーバーを起動
```bash
# Python 3の場合
python -m http.server 8000

# Node.jsの場合
npx serve .

# PHPの場合
php -S localhost:8000
```

3. ブラウザで `http://localhost:8000` にアクセス

### デプロイ
- **GitHub Pages**: リポジトリ設定から有効化可能
- **Netlify/Vercel**: ドラッグ＆ドロップでデプロイ可能
- **静的ホスティング**: すべての静的ファイルで構成

## 🤝 貢献

1. フォークを作成
2. 機能ブランチを作成 (`git checkout -b feature/AmazingFeature`)
3. 変更をコミット (`git commit -m 'Add some AmazingFeature'`)
4. ブランチにプッシュ (`git push origin feature/AmazingFeature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で提供されています。

## 🙏 クレジット

- モルック公式ルールに基づいた正確な実装
- 正しいピン配置（7-9-8 → 5-11-12-6 → 3-10-4 → 1-2）
- 物理演算アルゴリズムの最適化
- 倒れた位置でのピン立て直し機能
- レスポンシブUIデザイン

## 📝 更新履歴

### v1.2.0 - 最新版
- ✅ 投球モードの操作性を大幅改善（平面図対応）
- ✅ クリックした位置にモルックが直進する直感的な操作を実現
- ✅ 飛距離と当たり判定を最適化
- ✅ 投球エリア制限を廃止し、キャンバス全体でクリック可能に
- ✅ 平面図らしい直線運動に変更（放物線から）

### v1.1.0
- ✅ 正しいモルック公式ピン配置を実装
- ✅ 正確なスコア計算ルール（2本以上=本数）を修正
- ✅ 倒れたピンが倒れた位置で立つ機能を追加
- ✅ UIテキストを改善（「狙うピンを選択」）
- ✅ ピンのはじける距離を最適化
- ✅ 投球モードのキャンバスクリックイベントを修正

### v1.0.0
- ✅ 基本的なモルックゲーム機能
- ✅ 物理アニメーションと衝突判定
- ✅ 双方向インターフェース（手動・投球モード）
- ✅ リアルタイムスコア計算と勝敗判定

---

**🎮 審判としてのスキルを向上させ、モルックの戦略性を楽しみましょう！**